<html>
<body>
<canvas id ="lab03" width='500' height='400' />
<script>
	var canvas = document.getElementById("lab03");
	var ctx = canvas.getContext("2d");
	
	var x0 ;
	var y0 ;
	var x1 ;
	var y1 ;
	var y ;
	
	var flag = 0;
	var eps = 0;
	
	document.addEventListener("click", function(event) {
			if (event.which == 1) {
				if (flag == 0) {
					x0 = event.offsetX;
					y0 = event.offsetY;
					flag = 1;
				} else if (flag == 1) {
					x1 = event.offsetX;
					y1 = event.offsetY;
					eps = 0;
					
					if ( Math.abs(y1-y0) <= Math.abs(x1-x0)){
						y = y0;
						if ((x1>x0)&&(y1>y0)){
							for (var x=x0; x<x1;x++){
								ctx.fillRect(x, y, 1, 1);
								eps +=2*Math.abs(y1-y0);
								if(eps>Math.abs(x1-x0)) {
									y++;
									eps -= 2*Math.abs(x1-x0);
								}
							}
						}	
						else if ((x1>x0)&&(y1<y0)){
							for (var x=x0; x<x1;x++){
								ctx.fillRect(x, y, 1, 1);
								eps +=2*Math.abs(y0-y1);
								if(eps>Math.abs(x1-x0)) {
									y--;
									eps -= 2*Math.abs(x1-x0);
								}
							}
						}
						else if ((x1<x0)&&(y1<y0)){
							for (var x=x0; x>x1;x--){
								ctx.fillRect(x, y, 1, 1);
								eps +=2*Math.abs(y0-y1);
								if(eps>Math.abs(x0-x1)) {
									y--;
									eps -= 2*Math.abs(x1-x0);
								}
							}
						}
						else if ((x1<x0)&&(y1>y0)){
							for (var x=x0; x>x1;x--){
								ctx.fillRect(x, y, 1, 1);
								eps +=2*Math.abs(y1-y0);
								if(eps>Math.abs(x1-x0)) {
									y++;
									eps -= 2*Math.abs(x1-x0);
								}
							}
						}
					} else {
						x = x0;
						if ((x1>x0)&&(y1>y0)){
							for (var y=y0; y<y1;y++){
								ctx.fillRect(x, y, 1, 1);
								eps +=2*Math.abs(x1-x0);
								if(eps>Math.abs(y1-y0)) {
									x++;
									eps -= 2*Math.abs(y1-y0);
								}
							}
						}	
						else if ((x1>x0)&&(y1<y0)){
							for (var y=y0; y>y1;y--){
								ctx.fillRect(x, y, 1, 1);
								eps +=2*Math.abs(x0-x1);
								if(eps>Math.abs(y1-y0)) {
									x++;
									eps -= 2*Math.abs(y1-y0);
								}
							}
						}
						else if ((x1<x0)&&(y1<y0)){
							for (var y=y0; y>y1;y--){
								ctx.fillRect(x, y, 1, 1);
								eps +=2*Math.abs(x0-x1);
								if(eps>Math.abs(y0-y1)) {
									x--;
									eps -= 2*Math.abs(y1-y0);
								}
							}
						}
						else if ((x1<x0)&&(y1>y0)){
							for (var y=y0; y<y1;y++){
								ctx.fillRect(x, y, 1, 1);
								eps +=2*Math.abs(x1-x0);
								if(eps>Math.abs(y1-y0)) {
									x--;
									eps -= 2*Math.abs(y1-y0);
								}
							}
						}
					}
					flag = 0;
				}
			}
		});
		
</script>
</body>
</html>
